(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{30:function(e,t,a){e.exports=a(62)},35:function(e,t,a){},37:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),l=a.n(c),o=(a(35),a(12)),u=a(7),s=a(5),i=a.n(s),m=a(9),p=a(11),f=(a(37),a(27)),h=a.n(f).a.create({baseURL:"https://avainformatica-io.umbler.net"});var E=function(){var e=Object(u.f)(),t=Object(n.useState)(""),a=Object(p.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),s=Object(p.a)(o,2),f=s[0],E=s[1];function d(){return v.apply(this,arguments)}function v(){return(v=Object(m.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.getItem("auth"),console.log(a),t.next=4,h.get("/checkAuth/".concat(a)).then((function(t){!0===t.data?e.push("/list"):console.log("Houve um problema com login.")}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(){return(g=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,h.post("/auth",{email:c,senha:f}).then((function(e){console.log(e),1==e.data.status?(localStorage.setItem("nome",e.data.auth.nome),localStorage.setItem("auth",e.data.auth.token)):alert("Erro ao realizar login.")}));case 3:d();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){d()}),[]),r.a.createElement("form",{className:"formulario",onSubmit:function(e){return g.apply(this,arguments)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null," Seu melhor email: "),r.a.createElement("input",{type:"email",className:"form-control",placeholder:"exemplo@email.com",value:c,onChange:function(e){return l(e.target.value)},required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null," Sua senha: "),r.a.createElement("input",{type:"password",className:"form-control",placeholder:"*******",value:f,onChange:function(e){return E(e.target.value)},required:!0})),r.a.createElement("input",{type:"submit",className:"btn btn-primary float-right",value:"Acessar"}),r.a.createElement("div",{className:"clear"}))};a(60),a(61);var d=function(e){var t=e.dev;return r.a.createElement("li",{className:"item"},r.a.createElement("p",null,t.nome),r.a.createElement("p",null,t.email),r.a.createElement("p",null,t.telefone))};var v=function(){var e=Object(u.f)(),t=Object(n.useState)([]),a=Object(p.a)(t,2),c=a[0],l=a[1];function o(){return(o=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/cadastros");case 2:t=e.sent,l(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=Object(m.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=localStorage.getItem("auth"),console.log(),!a){t.next=7;break}return t.next=5,h.get("/checkAuth/".concat(a)).then((function(t){!1===t.data&&(localStorage.removeItem("auth"),e.push("/"))}));case 5:t.next=9;break;case 7:localStorage.removeItem("auth"),e.push("/");case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){o.apply(this,arguments)}(),function(){s.apply(this,arguments)}()}),[]);var f=localStorage.getItem("nome");return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,f),r.a.createElement("button",{class:"btn-danger",onClick:function(){localStorage.removeItem("auth"),e.push("/")}},"Sair"),r.a.createElement("div",{class:"clear"}),r.a.createElement("main",null,r.a.createElement("ul",null,c.map((function(e){return r.a.createElement(d,{key:e._id,dev:e})})))))},g=function(){return r.a.createElement(o.a,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:E}),r.a.createElement(u.a,{exact:!0,path:"/list",component:v})))};var b=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("h2",null,"ADM Sobradinho")),r.a.createElement("section",null,r.a.createElement(g,null)),r.a.createElement("footer",null,r.a.createElement("p",null," \xa9 Todos os Direitos Reservados "),r.a.createElement("p",null," Criado por Andr\xe9 Junior ")))};l.a.render(r.a.createElement(b,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.4af736ab.chunk.js.map